---
const res = await fetch("https://netcintra.delipe.com.br/wp-json/wp/v2/posts?_embed");
const posts = await res.json();

// Function to format date
function formatDate(dateString: string) {
    const date = new Date(dateString);
    return date.toLocaleDateString('pt-BR', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
    });
}

// Function to strip HTML tags
function stripHtml(html: string) {
    return html.replace(/<[^>]*>/g, '');
}
---

<div class="min-h-screen py-20 xl:px-20 px-8">
    <!-- Header Section -->
    <div class="text-center mb-12">
        <h1 class="text-4xl font-bold text-white mb-4">Status do Sistema</h1>
        <div class="w-20 h-1 bg-primary mx-auto"></div>
        <p class="text-white/80 mt-4">Acompanhe as últimas atualizações sobre nossos serviços</p>
    </div>

    <!-- Posts Grid -->
    <div class="grid gap-6 max-w-4xl mx-auto">
        {
            posts.map((post: any) => (
                <div class="bg-gradient-to-br from-[#182E89] to-[#001158] rounded-2xl border-2 border-[#3B4E96] p-6 shadow-lg transition-all hover:scale-[1.02]">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-3 h-3 rounded-full bg-primary animate-pulse"></div>
                        <span class="text-white/60 text-sm">{formatDate(post.date)}</span>
                    </div>
                    
                    <h2 class="text-2xl font-bold text-white mb-4">
                        {post.title.rendered}
                    </h2>
                    
                    <div class="text-white/80 mb-6 leading-relaxed">
                        {stripHtml(post.excerpt.rendered)}
                    </div>
                    
                    <a 
                        href={`/status/${post.slug}`}
                        class="inline-flex items-center gap-2 bg-primary text-white px-6 py-2 rounded-full hover:bg-primary/80 transition-colors"
                    >
                        Ler mais
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </a>
                </div>
            ))
        }
    </div>
</div>